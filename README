Задача построения и тестирования стратегии

Постановка задачи:1.	Модель процесса: случайное блуждание (броуновское движение), начинающееся из заданной точки, с кусочно-линейным трендом. Параметры: длина ряда (N), начальное значение, дисперсия шума, интенсивность моментов изменения тренда (Lambda), дисперсия и среднее распределения наклона тренда. Если значение получается меньшее или равное нулю, то все дальнейшие значения, включая данное, считаются равными нулю.2.	Задача: Выработать и протестировать методику определения моментов покупки акций и их последующей продажи (вход и выход). Т.е., должна быть построена функция, которая в каждый момент времени дает ответ 0 – ничего не делать или 1 –покупать (соответственно, -1 – продавать), основываясь на предыдущих значениях ряда.3.	Входные данные: базовый отрезок, на котором стратегия может строиться, и тестовый отрезок, на котором стратегия проверяется в режиме реального времени, т.е., не заглядывая в будущее.4.	Выходные данные: результат применения стратегии на тестовом отрезке.
Способ решения:•	Придумать стратегию (способ определения входов и выходов), зависящую от нескольких параметров, приводящую к устойчивому накоплению капитала.•	Критерий хорошей стратегии является, вообще говоря, двумерным. Первый – величина капитала за промежуток времени T; второй – устойчивость роста кривой доходности (например, величина drawdown, или, так называемая просадка). Одним из способов совмещения этих критериев является максимизация отношения доходности к просадке.•	Придумать способ определения параметров стратегии. Например, оптимизация критерия на базовом промежутке, или – придумать способ определения параметров, основанный на статистике, собранной с базового промежутка, дающий разумные результаты.•	С помощью моделирования проверить действенность этой методики. В результате получится распределение доходности, распределение просадки, распределение общего критерия, распределение числа сделок, в частности, среднее, минимум, максимум и разброс (стандарт). В частности, будет ясно, при каких параметрах процесса выработанная стратегия дает положительное мат.ожидание доходности.•	В качестве проверки методики можно использовать следующее:1. на базовом участке результаты должны быть лучше, чем на тестовом. 
2. Результаты (доходность) должны быть в среднем нулевые, если тренда нет (=горизонтальный, т.е., дисперсия и среднее наклона равны нулю)3. При нулевой дисперсии шума результаты должны быть максимальныПрограммы

A. Программа, которая1.	на основе базового участка оценивает параметры стратегии 
2.	применяет полученную стратегию отдельно к базовому и к тестовому отрезкам. 
3.	отдельно для базового и тестового отрезков• Рисует ряд и отмечает на нем точки входа и выхода 
• Строит кривую доходности
• Выдает значения доходности к концу периода, максимальную просадку и значение критерия4.	На графике ряда изображает также настоящий тренд.

B. Программа, котораяС помощью моделирования строит распределения результатов на базовом и тестовом отрезках.
Задания:Стратегия: проверяется гипотеза о равенстве нулю среднего приращения на скользящем отрезке ряда длины m. Если p-level < заданного числа p, то делается вывод о том, что мы находимся на растущем или убывающем тренде. В зависимости от этого нужно или покупать акции или продавать (если они уже куплены). Здесь два параметра – m и p.Критерии: 
• Доход• Доход при условии, что просадка не больше, чем заданное число процентов от счета 
• Доход минус число сделок, умноженное на заданную стоимость сделки.Доп. условия 
	1.	Фиксация дохода (take-profit) – продажа акций при условии, что цена стала больше назаданное число процентов. 
	2.	Фиксация убытков (stop-loss) – продажа акций при условии, что цена стала меньше назаданное число процентов. 
	3.	Объединение первых двух пунктов

Комментарии: Оптимизацию можно проводить перебором с некоторым шагом в заданных пределах. Требования к программе(ам): использование MDI (Multi-Document Interface) и создание progress-bar при счете.

Формирование капитала: Начинают все с фиксированного стартового капитала (1000 y.e.). При покупке акций они всегда покупаются на одну и ту же фиксированную сумму (100 y.e.). После одной покупки акций вторая покупка может произойти только после продажи купленных перед этим акций. При продаже продаются все имеющиеся акции. Разница между затраченной суммой и полученной и есть доход (он может быть отрицательным). Если в момент окончания базового или тестового периода на руках есть акции, то они продаются. Просадка счета считается как максимальное уменьшение капитала, возникающее за рассматриваемый период. Другой вариант меры риска – среднеквадратическое отклонение стоимости портфеля от линейно растущей линии (идеальное поведение стоимости портфеля) из начальной до конечной точки.
